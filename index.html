<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Love Game ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#ff7eb3,#ff758c);
  color:white;
  text-align:center;
  overflow:hidden;
}

h1{ margin:10px; }

#meterBox{
  width:80%;
  height:20px;
  background:#ffffff55;
  margin:10px auto;
  border-radius:20px;
}
#meter{
  width:0%;
  height:100%;
  background:#ff0066;
  border-radius:20px;
  transition:0.3s;
}

#game{
  position:relative;
  height:55vh;
}

.heart{
  position:absolute;
  font-size:28px;
  cursor:pointer;
  animation:fall 4s linear forwards;
}
@keyframes fall{
  from{ top:-40px; }
  to{ top:60vh; }
}

button{
  padding:8px 16px;
  border:none;
  border-radius:20px;
  background:#ff1493;
  color:white;
  font-size:16px;
  cursor:pointer;
  margin:5px;
}

#proposal{
  display:none;
  position:absolute;
  top:25%;
  width:100%;
}

.fire{
  position:absolute;
  font-size:25px;
  animation:boom 1s forwards;
}
@keyframes boom{
  0%{opacity:1;transform:scale(1);}
  100%{opacity:0;transform:scale(3);}
}

.rose{
  position:absolute;
  font-size:18px;
  animation:float 10s linear infinite;
}
@keyframes float{
  from{top:100vh;}
  to{top:-10vh;}
}
</style>
</head>
<body>

<h1>ğŸ’˜ Valentine Love Game ğŸ’˜</h1>

<input id="name" placeholder="Enter your crushâ€™s name ğŸ’Œ">
<br>
<button onclick="start()">Start</button>
<button onclick="toggleMusic()">ğŸµ Music: <span id="musicState">OFF</span></button>

<div id="meterBox">
  <div id="meter"></div>
</div>

<p id="info">Click hearts to fill the love meter ğŸ’–</p>

<div id="game"></div>

<div id="proposal">
  <h2 id="ask"></h2>
  <button onclick="yes()">YES ğŸ’</button>
  <button id="no" onmouseover="run()">NO ğŸ˜œ</button>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5f2b6c6e38.mp3">
</audio>

<script>
let love = 0;
let playing = false;
let musicOn = false;

function crush(){
  return document.getElementById("name").value || "My Love";
}

function start(){
  love = 0;
  playing = true;
  document.getElementById("proposal").style.display="none";
  updateMeter();
  spawnHeart();
}

function spawnHeart(){
  if(!playing) return;
  const h = document.createElement("div");
  h.className="heart";
  h.innerHTML="ğŸ’–";
  h.style.left=Math.random()*90+"vw";
  h.onclick=()=>{
    love+=10;
    updateMeter();
    h.remove();
    checkLove();
  };
  document.getElementById("game").appendChild(h);
  setTimeout(()=>h.remove(),4000);
  setTimeout(spawnHeart,700);
}

function updateMeter(){
  document.getElementById("meter").style.width = Math.min(love,100)+"%";
}

function checkLove(){
  if(love>=70){
    document.getElementById("info").innerText =
      "ğŸ Secret unlocked ğŸ’Œ\n" +
      crush() + ", you make my heart smile every day ğŸ’–";
  }
  if(love>=100){
    playing=false;
    showProposal();
  }
}

function showProposal(){
  document.getElementById("ask").innerText =
    crush() + ", will you be my Valentine? ğŸ’–";
  document.getElementById("proposal").style.display="block";
}

function yes(){
  fireworks();
  poem();
  alert("ğŸ’– YESSS!! " + crush() + " said YES! ğŸ’");
}

function run(){
  const b=document.getElementById("no");
  b.style.position="absolute";
  b.style.left=Math.random()*80+"vw";
  b.style.top=Math.random()*50+"vh";
}

function fireworks(){
  for(let i=0;i<20;i++){
    const f=document.createElement("div");
    f.className="fire";
    f.innerHTML="ğŸ’–";
    f.style.left=Math.random()*100+"vw";
    f.style.top=Math.random()*80+"vh";
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1000);
  }
}

function poem(){
  const poems=[
    crush()+" , your smile lights my world ğŸŒ¸",
    "Every heartbeat whispers your name, "+crush()+" ğŸ’“",
    crush()+" , you are my favorite miracle âœ¨"
  ];
  alert("ğŸ’Œ Love Poem ğŸ’Œ\n\n" +
    poems[Math.floor(Math.random()*poems.length)] +
    "\n\nForever yours ğŸ’–");
}

/* Music Toggle */
function toggleMusic(){
  const m=document.getElementById("music");
  musicOn=!musicOn;
  document.getElementById("musicState").innerText = musicOn ? "ON" : "OFF";
  musicOn ? m.play() : m.pause();
}

/* Roses */
setInterval(()=>{
  const r=document.createElement("div");
  r.className="rose";
  r.innerHTML="ğŸŒ¹";
  r.style.left=Math.random()*100+"vw";
  document.body.appendChild(r);
  setTimeout(()=>r.remove(),10000);
},800);
</script>

</body>
</html>
